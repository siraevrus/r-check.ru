# –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## üìã PHP —Ñ–∞–π–ª—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏:
1. ‚úÖ `export_excel.php`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –±–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ —ç–∫—Å–ø–æ—Ä—Ç (–≥–æ—Ä–æ–¥, —Å—Ç–∞—Ç—É—Å, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞)

2. ‚úÖ `file_upload.php`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ CSV
   - –¢–µ–ø–µ—Ä—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è, –∞ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç—Å—è

3. ‚úÖ `preview_upload.php`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω SQL –∑–∞–ø—Ä–æ—Å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–≥—Ä—É–∑–æ–∫
   - –£–±—Ä–∞–Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–ª–æ–Ω–∫–∞ upload_period_id

4. ‚úÖ `users_report.php`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –±–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (–≥–æ—Ä–æ–¥, —Å—Ç–∞—Ç—É—Å, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞)
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–ü—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:** `/path/to/project/` (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Ü–µ–ª–∏–∫–æ–º
**–§–∞–π–ª:** `database/reprocrm.db`
**–ü—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:** `/path/to/project/database/reprocrm.db`

‚ö†Ô∏è **–í–ê–ñ–ù–û:** 
- –°–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Å—Ç–∞—Ä–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∑–∞–º–µ–Ω–æ–π!
- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–¥ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (chmod 644)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –±–∞–∑–µ, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

**–î–ª—è SQLite:**
```sql
sqlite3 /path/to/project/database/reprocrm.db << 'EOF'
CREATE TABLE users_new (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    promo_code_id INTEGER,
    full_name VARCHAR(255) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    city VARCHAR(100) NOT NULL,
    phone VARCHAR(20),
    password_hash VARCHAR(255) NOT NULL,
    status VARCHAR(20) DEFAULT 'active',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (promo_code_id) REFERENCES promo_codes(id) ON DELETE CASCADE
);
INSERT INTO users_new SELECT * FROM users;
DROP TABLE users;
ALTER TABLE users_new RENAME TO users;
EOF
```

**–î–ª—è MySQL:**
```sql
ALTER TABLE users MODIFY COLUMN promo_code_id INT NULL;
```

---

## üìÑ –°—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)

1. `database/schema.sql` - —Å—Ö–µ–º–∞ –¥–ª—è MySQL
2. `database/schema.sqlite.sql` - —Å—Ö–µ–º–∞ –¥–ª—è SQLite

–≠—Ç–∏ —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –Ω–æ –æ–Ω–∏ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã.

---

## ‚ùå –ù–ï –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã):

- `otchet.csv` - –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –æ—Ç—á–µ—Ç–∞
- `otchet.xlsx` - –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –æ—Ç—á–µ—Ç–∞
- `DEPLOYMENT_CHECKLIST.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `FILES_TO_COPY.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

## üìù –ü–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π:

1. **–°–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   cp /path/to/project/database/reprocrm.db /path/to/project/database/reprocrm.db.backup
   ```

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ PHP —Ñ–∞–π–ª—ã:**
   - `export_excel.php`
   - `file_upload.php`
   - `preview_upload.php`
   - `users_report.php`

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   - `database/reprocrm.db` (–∏–ª–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é)

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   ```bash
   chmod 644 /path/to/project/database/reprocrm.db
   chmod 755 /path/to/project/*.php
   ```

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:**
   - –û—Ç–≤—è–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥–∞
   - –í—ã–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—Ç–≤—è–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–≥—Ä—É–∑–∫—É –æ—Ç—á–µ—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫ (–∏–∫–æ–Ω–∫–∞ –≥–ª–∞–∑–∞)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ CSV —Å—É–º–º–∏—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

